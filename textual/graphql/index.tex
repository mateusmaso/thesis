\chapter{GraphQL}

O GraphQL é uma linguagem de consulta de dados, além de um interpretador, criada pelo Facebook para trabalhar com APIs de forma alternativa. Seu objetivo é fornecer uma descrição completa e compreensível de dados disponíveis em interfaces de aplicação, permitindo que clientes façam consultas de dados que desejam trabalhar de forma precisa. \cite{Facebook2016}

Por ser uma especificação recente, após sua publicação em 2015, o GraphQL já apresenta implementações em diversas linguagens de programação e atualmente é utilizado em diversos contextos, como na comunicação cliente-servidor, microsserviços, navegação de árvores, gerador de consultas para banco de dados, entre outros.

É importante ressaltar que o GraphQL não é uma linguagem de banco de dados, por mais que possa ser utilizada para esta finalidade. Ao invés, sua linguagem e interpretador trabalham com a ideia de mapeamento de campos e tipos de dados de retorno em APIs, fornecendo um esquema para interagir com interfaces através da execução de consultas da linguagem. \cite{Facebook2016}

Nas figuras 8 e 9, é descrito um exemplo de mapeamento de uma API em JavaScript em um esquema GraphQL, através da análise de estruturas de retorno.

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    var pessoa = {
      id: 1,
      nome: "Mateus Maso"
    }

    class Query {
      pessoa() {
        return pessoa
      }
    }

    class Pessoa {
      id(pessoa) {
        return pessoa.id
      }

      nome(pessoa) {
        return pessoa.nome
      }
    }
  \end{minted}
  \caption{API JavaScript escrito em ES6}
\end{figure}

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    type Query {
      pessoa: Pessoa
    }

    type Pessoa {
      id: ID
      nome: String
    }
  \end{minted}
  \caption{Esquema GraphQL para API da Figura 8}
\end{figure}

Após a criação do esquema, as figuras 10 e 11 descrevem um exemplo de consulta utilizando a sintaxe do GraphQL e os tipos de dados mapeados pelo esquema. Ao ser executada, o interpretador (esquema) irá analisar, validar e transformar a consulta em chamadas para a API, retornado uma representação exata dos dados requisitados no formato JSON. \cite{Facebook2016}

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    query {
      pessoa {
        nome
      }
    }
  \end{minted}
  \caption{Consulta GraphQL para Figura 9}
\end{figure}

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    {
      "pessoa": {
        "nome": "Mateus Maso"
      }
    }
  \end{minted}
  \caption{Resposta JSON esperada após execução da Figura 10}
\end{figure}

A seguir, é abordado os elementos que compõem a linguagem, seu sistema de tipagem e o processo de introspecção.

\input{textual/graphql/linguagem-de-consulta/index}
\input{textual/graphql/sistema-de-tipagem/index}
\input{textual/graphql/introspeccao/index}
