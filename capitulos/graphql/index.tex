\chapter{GraphQL}

GraphQL é, além de um interpretador, uma linguagem de consulta de dados criado pelo Facebook para trabalhar com APIs de forma alternativa. Seu objetivo é fornecer uma descrição completa e compreensível de dados disponíveis em interfaces de aplicação. Assim, permitindo que clientes façam consultas de forma precisa em busca de dados que desejam trabalhar. \cite{GraphQL2016}

Por ser uma especificação recente, após sua publicação em 2015, GraphQL já apresenta implementações em diversas linguagens de programação e atualmente é utilizado em diversos contextos como na comunicação entre cliente-servidor, microserviços, navegação de árvores, gerador de consultas para banco de dados, entre outros.

É importante ressaltar que GraphQL não é uma linguagem de banco de dados, por mais que possa ser utilizado para esta finalidade. Ao invés, sua linguagem e interpretador trabalham com a ideia de mapeamento de campos e tipos de dados em aplicações, fornecendo uma interface unificada e amigável para desenvolvimento de produtos e de outras ferramentas, como a proposta neste trabalho. \cite{GraphQL2016}

Para gerar um esquema, antes é preciso que haja uma aplicação para que possa ser definido os tipos de estruturas, campos de acesso e funções de retorno de dados.

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    var pessoa = {
      nome: "Mateus Maso"
    }

    class Query {
      pessoa() {
        return pessoa
      }
    }

    class Pessoa {
      nome(pessoa) {
        return pessoa.nome
      }
    }
  \end{minted}
  \caption{Exemplo de API em JavaScript (ES6)}
\end{figure}

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    type Query {
      pessoa: User
    }

    type Pessoa {
      id: ID
      nome: String
    }
  \end{minted}
  \caption{Esquema GraphQL para API da Figura 11}
\end{figure}

Após a criação do esquema, já é possível enviar consultas GraphQL para que a ferramenta valide a semântica e sintaxe, transforme em execuções de API e retorne dados representados no formato JSON.  \cite{GraphQL2016}

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    query {
      pessoa {
        nome
      }
    }
  \end{minted}
  \caption{Exemplo de consulta GraphQL para Figura 12}
\end{figure}

\begin{figure}[H]
  \centering
  \begin{minted}[frame=single,framesep=10pt,fontsize=\footnotesize]{text}
    {
      "pessoa": {
        "nome": "Mateus Maso"
      }
    }
  \end{minted}
  \caption{Resposta JSON esperada após execução pela Figura 13}
\end{figure}

A seguir, será feita uma abordagem sobre os elementos que compõem a linguagem, seu sistema de tipagem e como a analisar metadados de esquemas utilizando o processo de introspecção.

\input{capitulos/graphql/linguagem-de-consulta/index}
\input{capitulos/graphql/sistema-de-tipagem/index}
\input{capitulos/graphql/introspeccao/index}
